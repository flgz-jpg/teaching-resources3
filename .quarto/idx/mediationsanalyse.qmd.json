{"title":"Mediationsanalyse","markdown":{"yaml":{"title":"Mediationsanalyse"},"headingText":"Einführung: Mediationsanalyse","containsRefs":false,"markdown":"\n\n\n```{r message=FALSE}\nlibrary(flextable)\nlibrary(jtools)\nlibrary(dplyr)\nlibrary(mediation)\n```\n\n## Beispiel\n\nIn den Daten einer Studie zu den negativen Effekten von Internet-Konsum auf die Studienleistung zeigt sich, dass Personen, die im offenen Antwortformat angegeben haben, sich regelmässig süsse Katzenvideos auf TikTok anzusehen, entgegen allen Erwartungen bessere Noten schreiben. \n\n\n\n```{mermaid}\ngraph LR\n    A[Süsse Katzenvideos] -- Signifikanter Effekt --> B[Produktivität]\n```\n\n\n**Handelt es sich hierbei um einen plausiblen Zusammenhang? Welche Alternativen wären denkbar?**\n\nAus der Literatur weiss die Masterandin in dem Projekt, dass eine gute Stimmung sich positiv auf das Lernen auswirkt. Daraus schliesst sie, dass der Effekt zwischen süssen Katzenvideos und besserer Studienleistung über die gute Stimmung vermittelt wird. \n\nSie nimmt also an, dass es sich um einen **Mediationseffekt** handelt. Der **indirekte Effekt** der Unabhängigen Variable (UV; süsse Katzenvideos) auf die Abhängige Variable (AV; besser Studienleistung) wird über einen **Mediator (M; gute Stimmung)** vermittelt.  \n\n::: {.callout-warning title=\"Definition Mediationseffekt\"}\n\nEin Mediationseffekt ist ein\n\n- Indirekter Effekt\n- Der Effekt der UV auf die AV wird durch einen Mediator M vermittelt\n- Es handelt sich um eine kausale Kette / einen Mechanismus\n\n:::\n\n## Wie lässt sich das überprüfen?\n\nEs gibt unterschiedliche Methoden, um Mediationseffekte zu prüfen. In diesem Beispiel werden wir die klassische Methode von Barron und Kenney (1986) verwenden. Es handelt sich dabei um eine nicht unumstrittene, aber gut etablierte Methode. \n\n### Barron und Kenny (1986)\n\nDiese Methode umfasst 4 Schritte:\n\n- Schätzung der Beziehung zwischen X und Y\n→ Der Effekt c muss signifikant von 0 verschieden sein.\n\n- Schätzung der Beziehung zwischen X und M\n→ Der Effekt a muss signifikant von 0 verschieden sein.\n\n- Schätzung der Beziehung zwischen M und Y unter Kontrolle von X\n→ Der Effekt b muss signifikant von 0 verschieden sein.\n\n- Schätzung der Beziehung zwischen X und Y unter Kontrolle von M\n→ Der Effekt c′ sollte nicht signifikant sein und nahe bei 0 liegen.\n\n```{mermaid}\ngraph LR\n    A[Süsse Katzenvideos] -- Kein / Kleiner Effekt --> B[Produktivität]\n    A -- Signifikanter Effekt --> C[Gute Stimmung]\n    C -- Signifikanter Effekt --> B[Produktivität]\n```\n\n**\"Full Mediation\"**: Wenn für M kontrolliert wird, gibt es keinen Zusammenhang mehr / ist der Zusammenhang nicht mehr signifikant\n\n**\"Partial Mediation\"**: Wenn für M kontrolliert wird, wird der Zusammenhang kleiner\n\n::: {.callout-warning title=\"Methode von Barron und Kenny (1986)\"}\n\n1. Prüfung eines signifikanten **direkten Zusammenhangs** zwischen UV und AV\n2. Prüfung eines signifikanten Zusammenhangs zwischen UV und M\n3. Prüfung eines signifikanten Zusammenhangs zwischen M und AV unter Kontrolle der UV\n4. Wenn für M kontrolliert wird, wird der Zusammehang zwischen UV und AV **kleiner / nicht mehr signifikant**\n\n:::\n\n\n## In R\n\n##### Daten Einlesen\n\n```{r}\n#| code-fold: true\n\nset.seed(123)\n\nn <- 100\n\n# Unabhängige Variable (X): Cat Videos\ncat_videos <- rnorm(n, mean = 5, sd = 2)\n\n# Mediator (M): Happiness (beeinflusst durch Cat Videos)\nhappiness <- 0.5 * cat_videos + rnorm(n)\n\n# Abhängige Variable (Y): Productivity (beeinflusst durch Cat Videos und Happiness)\nproductivity <- 0.3 * cat_videos + 0.6 * happiness + rnorm(n)\n\ndata <- data.frame(cat_videos, happiness, productivity)\nhead(data)\n\n```\n\n\n::: {.callout-note collapse=\"true\" title=\"1.Schätzung der Beziehung zwischen X und Y→ Der Effekt c muss signifikant von 0 verschieden sein.\"}\n```{r}\n# Schritt 1: X → Y (Total Effect c)\n\nmodel_c <- lm(productivity ~ cat_videos, data = data)\nsumm(model_c)$coef\n```\n:::\n\n::: {.callout-note collapse=\"true\" title=\"2.Schätzung der Beziehung zwischen X und M→ Der Effekt a muss signifikant von 0 verschieden sein.\"}\n```{r}\n# Schritt 2: X → M (Path a)\nmodel_a <- lm(happiness ~ cat_videos, data = data)\nsumm(model_a)$coef\n```\n:::\n\n\n::: {.callout-note collapse=\"true\" title=\"3.&4.Schätzung der Beziehung zwischen M und Y unter Kontrolle von X→ Der Effekt b muss signifikant von 0 verschieden sein / Der Effekt c' wird kleiner / nicht mehr signifikant.\"}\n```{r}\n# Schritt 3: M → Y (kontrolliert für X) (Path b)\n# und X → Y (kontrolliert für M) (Direct Effect c')\nmodel_b_cprime <- lm(productivity ~ cat_videos + happiness, data = data)\nsumm(model_b_cprime)$coef\n```\n:::\n\n\n\n-   Totaler Effekt von X auf Y: c = c’ + ab\n\n-   Indirekter Effekt von X auf Y: ab\n\n-   Direkter Effekt X on Y nach dem für M kontrolliert wurde: c’ = c - ab\n\n\n```{r}\n#| code-fold: true\n\nlibrary(jtools)\n\nexport_summs(model_c, model_a, model_b_cprime)\n```\n\n# R Skript\n\nIm Folgenden Beispiel wollen wir untersuchen, ob ein geringer Selbstwert auf Seiten der Beziehungsberechtigten dazu beiträgt, dass diese bei negativem Affekt eher zu Bestrafungen greifen.\n\n```{r message=FALSE}\n\n# Daten einlesen\n\nparenting_data = read.csv2(\"parenting_data.csv\", sep = \";\") \n# alternativ: df <- read.csv2() \n\n\n```\n\n```{r message=FALSE}\n\n#  Mediationsanalyse nach Barron & Kenny\n# ----------------------------------------------------------\n\n#  Step 1: Gibt es einen direkten Hauptweffekt x -> y? (path c)\n\npath_c =lm(strafen ~ negative_affect_z, data = parenting_data)\n#summ(path_c)$coef\n\n#  Step 2: Gibt es einen signifikanten Zusammenhang zwischen X und M? (path a)\n\npath_a =lm(selbstwert_z ~ negative_affect_z, data = parenting_data)\n#summ(path_a)$coef\n\n#  Step 3: Gibt es gleichzeitig einen Zusammenhang zwischen X und Y, wenn man für X kontrolliert? (path b)\n#  Step 4: Verschwindet / verringert sich der Effekt zwischen X und Y, wenn man für M kontrolliert? (path c')\n\npath_b_cprime =lm(strafen  ~ selbstwert_z + negative_affect_z, data = parenting_data)\n#summ(path_b_cprime)$coef\n\n# Visualize Summary\n\nlibrary(jtools)\n\nexport_summs(path_c, path_a, path_b_cprime)\n\n```\n\n## Exkurs: Testung des Mediationseffekts \n\nDie Herangehensweise nach Barron und Kenny liefert Evidenz für oder gegen einen Mediationseffekt, jedoch keinen Test desselben. Eine Herangehensweise zur Testung des Mediationseffektes soll im Folgenden vorgestellt werden.  \n\n```{r message=FALSE}\n\n#  Testung des Mediationseffekts (ab) mit Bootstrapped Intervals\n# -------------------------------------------------------------------------------------\n\n\nparenting_data$negative_affect_z <- as.numeric(scale(parenting_data$negative_affect))\nparenting_data$selbstwert_z <- as.numeric(scale(parenting_data$selbstwert))\n\nparenting_data <- parenting_data %>%\n  dplyr::select(negative_affect_z, selbstwert_z, strafen) %>%\n  na.omit()\n\nmed_model <- lm(selbstwert_z ~ negative_affect_z, data = parenting_data)\nout_model <- lm(strafen ~ selbstwert_z + negative_affect_z, data = parenting_data)\n\n\nmediate_test <- mediate(med_model, out_model,\n                        treat = \"negative_affect_z\",\n                        mediator = \"selbstwert_z\",\n                        boot = TRUE, sims = 5000)\n\nsummary(mediate_test)\n\n\n    # Interpretation\n\n# ACME: Das ist der indirekte Effekt (Average Causal Mediation Effect) — der Teil von X’s Effect auf Y, der durch den Mediator M vermittelt wird\n\n# ADE: Das ist der direkte Effekt; der Effekt von X auf Y unter Kontrolle des Einflusses von M\n\n```\n\n","srcMarkdownNoYaml":"\n\n# Einführung: Mediationsanalyse\n\n```{r message=FALSE}\nlibrary(flextable)\nlibrary(jtools)\nlibrary(dplyr)\nlibrary(mediation)\n```\n\n## Beispiel\n\nIn den Daten einer Studie zu den negativen Effekten von Internet-Konsum auf die Studienleistung zeigt sich, dass Personen, die im offenen Antwortformat angegeben haben, sich regelmässig süsse Katzenvideos auf TikTok anzusehen, entgegen allen Erwartungen bessere Noten schreiben. \n\n\n\n```{mermaid}\ngraph LR\n    A[Süsse Katzenvideos] -- Signifikanter Effekt --> B[Produktivität]\n```\n\n\n**Handelt es sich hierbei um einen plausiblen Zusammenhang? Welche Alternativen wären denkbar?**\n\nAus der Literatur weiss die Masterandin in dem Projekt, dass eine gute Stimmung sich positiv auf das Lernen auswirkt. Daraus schliesst sie, dass der Effekt zwischen süssen Katzenvideos und besserer Studienleistung über die gute Stimmung vermittelt wird. \n\nSie nimmt also an, dass es sich um einen **Mediationseffekt** handelt. Der **indirekte Effekt** der Unabhängigen Variable (UV; süsse Katzenvideos) auf die Abhängige Variable (AV; besser Studienleistung) wird über einen **Mediator (M; gute Stimmung)** vermittelt.  \n\n::: {.callout-warning title=\"Definition Mediationseffekt\"}\n\nEin Mediationseffekt ist ein\n\n- Indirekter Effekt\n- Der Effekt der UV auf die AV wird durch einen Mediator M vermittelt\n- Es handelt sich um eine kausale Kette / einen Mechanismus\n\n:::\n\n## Wie lässt sich das überprüfen?\n\nEs gibt unterschiedliche Methoden, um Mediationseffekte zu prüfen. In diesem Beispiel werden wir die klassische Methode von Barron und Kenney (1986) verwenden. Es handelt sich dabei um eine nicht unumstrittene, aber gut etablierte Methode. \n\n### Barron und Kenny (1986)\n\nDiese Methode umfasst 4 Schritte:\n\n- Schätzung der Beziehung zwischen X und Y\n→ Der Effekt c muss signifikant von 0 verschieden sein.\n\n- Schätzung der Beziehung zwischen X und M\n→ Der Effekt a muss signifikant von 0 verschieden sein.\n\n- Schätzung der Beziehung zwischen M und Y unter Kontrolle von X\n→ Der Effekt b muss signifikant von 0 verschieden sein.\n\n- Schätzung der Beziehung zwischen X und Y unter Kontrolle von M\n→ Der Effekt c′ sollte nicht signifikant sein und nahe bei 0 liegen.\n\n```{mermaid}\ngraph LR\n    A[Süsse Katzenvideos] -- Kein / Kleiner Effekt --> B[Produktivität]\n    A -- Signifikanter Effekt --> C[Gute Stimmung]\n    C -- Signifikanter Effekt --> B[Produktivität]\n```\n\n**\"Full Mediation\"**: Wenn für M kontrolliert wird, gibt es keinen Zusammenhang mehr / ist der Zusammenhang nicht mehr signifikant\n\n**\"Partial Mediation\"**: Wenn für M kontrolliert wird, wird der Zusammenhang kleiner\n\n::: {.callout-warning title=\"Methode von Barron und Kenny (1986)\"}\n\n1. Prüfung eines signifikanten **direkten Zusammenhangs** zwischen UV und AV\n2. Prüfung eines signifikanten Zusammenhangs zwischen UV und M\n3. Prüfung eines signifikanten Zusammenhangs zwischen M und AV unter Kontrolle der UV\n4. Wenn für M kontrolliert wird, wird der Zusammehang zwischen UV und AV **kleiner / nicht mehr signifikant**\n\n:::\n\n\n## In R\n\n##### Daten Einlesen\n\n```{r}\n#| code-fold: true\n\nset.seed(123)\n\nn <- 100\n\n# Unabhängige Variable (X): Cat Videos\ncat_videos <- rnorm(n, mean = 5, sd = 2)\n\n# Mediator (M): Happiness (beeinflusst durch Cat Videos)\nhappiness <- 0.5 * cat_videos + rnorm(n)\n\n# Abhängige Variable (Y): Productivity (beeinflusst durch Cat Videos und Happiness)\nproductivity <- 0.3 * cat_videos + 0.6 * happiness + rnorm(n)\n\ndata <- data.frame(cat_videos, happiness, productivity)\nhead(data)\n\n```\n\n\n::: {.callout-note collapse=\"true\" title=\"1.Schätzung der Beziehung zwischen X und Y→ Der Effekt c muss signifikant von 0 verschieden sein.\"}\n```{r}\n# Schritt 1: X → Y (Total Effect c)\n\nmodel_c <- lm(productivity ~ cat_videos, data = data)\nsumm(model_c)$coef\n```\n:::\n\n::: {.callout-note collapse=\"true\" title=\"2.Schätzung der Beziehung zwischen X und M→ Der Effekt a muss signifikant von 0 verschieden sein.\"}\n```{r}\n# Schritt 2: X → M (Path a)\nmodel_a <- lm(happiness ~ cat_videos, data = data)\nsumm(model_a)$coef\n```\n:::\n\n\n::: {.callout-note collapse=\"true\" title=\"3.&4.Schätzung der Beziehung zwischen M und Y unter Kontrolle von X→ Der Effekt b muss signifikant von 0 verschieden sein / Der Effekt c' wird kleiner / nicht mehr signifikant.\"}\n```{r}\n# Schritt 3: M → Y (kontrolliert für X) (Path b)\n# und X → Y (kontrolliert für M) (Direct Effect c')\nmodel_b_cprime <- lm(productivity ~ cat_videos + happiness, data = data)\nsumm(model_b_cprime)$coef\n```\n:::\n\n\n\n-   Totaler Effekt von X auf Y: c = c’ + ab\n\n-   Indirekter Effekt von X auf Y: ab\n\n-   Direkter Effekt X on Y nach dem für M kontrolliert wurde: c’ = c - ab\n\n\n```{r}\n#| code-fold: true\n\nlibrary(jtools)\n\nexport_summs(model_c, model_a, model_b_cprime)\n```\n\n# R Skript\n\nIm Folgenden Beispiel wollen wir untersuchen, ob ein geringer Selbstwert auf Seiten der Beziehungsberechtigten dazu beiträgt, dass diese bei negativem Affekt eher zu Bestrafungen greifen.\n\n```{r message=FALSE}\n\n# Daten einlesen\n\nparenting_data = read.csv2(\"parenting_data.csv\", sep = \";\") \n# alternativ: df <- read.csv2() \n\n\n```\n\n```{r message=FALSE}\n\n#  Mediationsanalyse nach Barron & Kenny\n# ----------------------------------------------------------\n\n#  Step 1: Gibt es einen direkten Hauptweffekt x -> y? (path c)\n\npath_c =lm(strafen ~ negative_affect_z, data = parenting_data)\n#summ(path_c)$coef\n\n#  Step 2: Gibt es einen signifikanten Zusammenhang zwischen X und M? (path a)\n\npath_a =lm(selbstwert_z ~ negative_affect_z, data = parenting_data)\n#summ(path_a)$coef\n\n#  Step 3: Gibt es gleichzeitig einen Zusammenhang zwischen X und Y, wenn man für X kontrolliert? (path b)\n#  Step 4: Verschwindet / verringert sich der Effekt zwischen X und Y, wenn man für M kontrolliert? (path c')\n\npath_b_cprime =lm(strafen  ~ selbstwert_z + negative_affect_z, data = parenting_data)\n#summ(path_b_cprime)$coef\n\n# Visualize Summary\n\nlibrary(jtools)\n\nexport_summs(path_c, path_a, path_b_cprime)\n\n```\n\n## Exkurs: Testung des Mediationseffekts \n\nDie Herangehensweise nach Barron und Kenny liefert Evidenz für oder gegen einen Mediationseffekt, jedoch keinen Test desselben. Eine Herangehensweise zur Testung des Mediationseffektes soll im Folgenden vorgestellt werden.  \n\n```{r message=FALSE}\n\n#  Testung des Mediationseffekts (ab) mit Bootstrapped Intervals\n# -------------------------------------------------------------------------------------\n\n\nparenting_data$negative_affect_z <- as.numeric(scale(parenting_data$negative_affect))\nparenting_data$selbstwert_z <- as.numeric(scale(parenting_data$selbstwert))\n\nparenting_data <- parenting_data %>%\n  dplyr::select(negative_affect_z, selbstwert_z, strafen) %>%\n  na.omit()\n\nmed_model <- lm(selbstwert_z ~ negative_affect_z, data = parenting_data)\nout_model <- lm(strafen ~ selbstwert_z + negative_affect_z, data = parenting_data)\n\n\nmediate_test <- mediate(med_model, out_model,\n                        treat = \"negative_affect_z\",\n                        mediator = \"selbstwert_z\",\n                        boot = TRUE, sims = 5000)\n\nsummary(mediate_test)\n\n\n    # Interpretation\n\n# ACME: Das ist der indirekte Effekt (Average Causal Mediation Effect) — der Teil von X’s Effect auf Y, der durch den Mediator M vermittelt wird\n\n# ADE: Das ist der direkte Effekt; der Effekt von X auf Y unter Kontrolle des Einflusses von M\n\n```\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"mediationsanalyse.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","editor":"visual","theme":"cosmo","title":"Mediationsanalyse"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}